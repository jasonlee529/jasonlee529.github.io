<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.0.0">
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.24/fancybox/fancybox.css" integrity="sha256-vQkngPS8jiHHH0I6ABTZroZk8NPZ7b+MUReOFE9UsXQ=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"jasonlee529.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Jason Lee Essay">
<meta property="og:url" content="https://jasonlee529.github.io/page/5/index.html">
<meta property="og:site_name" content="Jason Lee Essay">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Jason Lee">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://jasonlee529.github.io/page/5/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Jason Lee Essay</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?69f02f078fd202b54793c69f3596a63f 69f02f078fd202b54793c69f3596a63f"></script>






<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1336715083812391"
     crossorigin="anonymous"></script>
<meta name="google-adsense-account" content="ca-pub-1336715083812391">
<meta name="google-site-verification" content="DCecPF2mdIv3j__CgHKZ7KkdHn9F-6f4Grk8xYgVklE" />
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Jason Lee Essay</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Only dead fish go with the flow!</p>
      <img class="custom-logo-image" src="/img/20221112195403.jpg" alt="Jason Lee Essay">
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section">首页</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section">分类</a></li><li class="menu-item menu-item-about"><a href="/about" rel="section">关于</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section">归档</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section">标签</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jason Lee"
      src="/img/1491256964.jpg">
  <p class="site-author-name" itemprop="name">Jason Lee</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives">
          <span class="site-state-item-count">77</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories">
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags">
        <span class="site-state-item-count">100</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/jasonlee529" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jasonlee529" rel="noopener me" target="_blank">GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://www.cnblogs.com/jason0529/" title="博客园 → http:&#x2F;&#x2F;www.cnblogs.com&#x2F;jason0529&#x2F;" rel="noopener me" target="_blank">博客园</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jasonlee529.github.io/2018/06/07/216015d5fefa.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/1491256964.jpg">
      <meta itemprop="name" content="Jason Lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/06/07/216015d5fefa.html" class="post-title-link" itemprop="url">Java那些事－泛型通配符</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-06-07 13:54:48" itemprop="dateCreated datePublished" datetime="2018-06-07T13:54:48+08:00">2018-06-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="firestore-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>625</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>Java的类型通配符，可以出现在类、方法上面。最常用的方式就是集合类，例如List,Set等类上面。</p>
</blockquote>
<h2 id="通配符类型"><a href="#通配符类型" class="headerlink" title="通配符类型"></a>通配符类型</h2><ul>
<li>有泛型参数 List<T></li>
<li>有无类型标识 List&lt; ? &gt;</li>
<li>有通用的标识　List&lt; object &gt;</li>
<li>边界通配符　List&lt;? extends Class&gt;</li>
<li>边界通配符　List&lt;? super Class&gt;</li>
</ul>
<p>本文主要讨论的是最后的关于边界的通配符类型。</p>
<h2 id="看一个例子"><a href="#看一个例子" class="headerlink" title="看一个例子"></a>看一个例子</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;B&gt; bList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        bList.add(<span class="keyword">new</span> <span class="title class_">A</span>());</span><br><span class="line">        bList.add(<span class="keyword">new</span> <span class="title class_">B</span>());</span><br><span class="line">        bList.add(<span class="keyword">new</span> <span class="title class_">C</span>());</span><br><span class="line">        <span class="type">A</span> <span class="variable">a3</span> <span class="operator">=</span> bList.get(<span class="number">0</span>);</span><br><span class="line">        <span class="type">B</span> <span class="variable">b3</span> <span class="operator">=</span> bList.get(<span class="number">0</span>);</span><br><span class="line">        <span class="type">C</span> <span class="variable">C3</span> <span class="operator">=</span> bList.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;? <span class="keyword">extends</span> <span class="title class_">B</span>&gt; bExtends = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        bExtends.add(<span class="keyword">new</span> <span class="title class_">A</span>());</span><br><span class="line">        bExtends.add(<span class="keyword">new</span> <span class="title class_">B</span>());</span><br><span class="line">        bExtends.add(<span class="keyword">new</span> <span class="title class_">C</span>());</span><br><span class="line">        <span class="type">A</span> <span class="variable">a1</span> <span class="operator">=</span> bExtends.get(<span class="number">0</span>);</span><br><span class="line">        <span class="type">B</span> <span class="variable">b1</span> <span class="operator">=</span> bExtends.get(<span class="number">0</span>);</span><br><span class="line">        <span class="type">C</span> <span class="variable">C1</span> <span class="operator">=</span> bExtends.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;? <span class="built_in">super</span> B&gt; bSuper = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        bSuper.add(<span class="keyword">new</span> <span class="title class_">A</span>());</span><br><span class="line">        bSuper.add(<span class="keyword">new</span> <span class="title class_">B</span>());</span><br><span class="line">        bSuper.add(<span class="keyword">new</span> <span class="title class_">C</span>());</span><br><span class="line">        <span class="type">A</span> <span class="variable">a2</span> <span class="operator">=</span> bSuper.get(<span class="number">0</span>);</span><br><span class="line">        <span class="type">B</span> <span class="variable">b2</span> <span class="operator">=</span> bSuper.get(<span class="number">0</span>);</span><br><span class="line">        <span class="type">C</span> <span class="variable">C2</span> <span class="operator">=</span> bSuper.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">b</span> <span class="operator">=</span> <span class="string">&quot;b&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> <span class="keyword">extends</span> <span class="title class_">B</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">&quot;c&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>有三个类，继承关系是A &lt; B &lt; C。<br>然后声明了三个数组，list,extends,super.<br>上面的代码是编译不通过的。分别在第3、7、11-13、16、19、22-24行。</p>
<h2 id="原理分析"><a href="#原理分析" class="headerlink" title="原理分析"></a>原理分析</h2><p>List&lt;? extends B&gt; 得到的是B及B的子类的一个集合。<br>List&lt;? super B&gt; 得到的是B及B的父类的一个集合。<br>List<B>　得到的是一个B的集合。</p>
<ol>
<li>? extends B 声明了上界标识符、不定下界，而add(E e)的时候，编译器无法确定e需要分配的声明类型，虽然有实际类型，这个地方跟多态不一致，所以编译器不通过;而get(int i)的操作，会获取到一个肯定是B的元素，故是安全的。</li>
<li>? super B正相反，声明的是下界标识符、不定上界(Object)，当add(E e)的时候，添加的是子类型，子类型向上转型是安全的；get(int i)的时候，并不能确定拿到的会是一个怎样的类型，可能是Object，也能是A，故也是违规的。</li>
<li>B 声明的是上下界为B。add(E e)按照多态性，可以添加为B的类型及其子类型;get(int i)返回的必然是B的类型。</li>
</ol>
<h2 id="代码错误验证"><a href="#代码错误验证" class="headerlink" title="代码错误验证"></a>代码错误验证</h2><p>按照第1条解释，第3、11-13行的错误符合解释。<br>按照第2条解释，第19、22-24行的错误符合解释。<br>第7、16行是由于向下转型是不安全的，股编译错误。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>extends和super别定义了上下限，结论如下面的表格</p>
<p>|     	| extends 	| super  	| T    	|<br>|—–	|———	|——–	|——	|<br>| add 	| unsafe  	| safe   	| safe 	|<br>| get 	| safe    	| unsafe 	| safe 	|</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jasonlee529.github.io/2018/06/06/048dcfc8ea8f.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/1491256964.jpg">
      <meta itemprop="name" content="Jason Lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/06/06/048dcfc8ea8f.html" class="post-title-link" itemprop="url">k8s踩坑记第2篇--3个IP的故事</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-06-06 18:02:35" itemprop="dateCreated datePublished" datetime="2018-06-06T18:02:35+08:00">2018-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="firestore-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>5 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>例子来源于《Kubernetes实践指南》一书。问题依然没有解决，求助大神。</p>
</blockquote>
<h2 id="测试环境"><a href="#测试环境" class="headerlink" title="测试环境"></a>测试环境</h2><ul>
<li>Centos 7.0</li>
<li>docker 1.13.1</li>
<li>kubectl v1.5.2</li>
<li>etcd  3.2.18<br>都是通过yum安装，防火墙已关闭。</li>
</ul>
<h2 id="入坑问题"><a href="#入坑问题" class="headerlink" title="入坑问题"></a>入坑问题</h2><p>浏览器输入：<a href="http://ip:30001/demo/">http://ip:30001/demo/</a></p>
<blockquote>
<p>Error:com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.</p>
</blockquote>
<p>相关资源rc、pod、service、ep都创建成功,但是myweb的pods无法访问到mysql提供的数据库服务。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">kubectl get all</span></span><br><span class="line">NAME       DESIRED   CURRENT   READY     AGE</span><br><span class="line">rc/mysql   1         1         1         4h</span><br><span class="line">rc/myweb   1         1         1         2h</span><br><span class="line"></span><br><span class="line">NAME             CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE</span><br><span class="line">svc/kubernetes   10.254.0.1      &lt;none&gt;        443/TCP          5d</span><br><span class="line">svc/mysql        10.254.67.31    &lt;none&gt;        3306/TCP         4h</span><br><span class="line">svc/myweb        10.254.62.177   &lt;nodes&gt;       8080:30001/TCP   2h</span><br><span class="line"></span><br><span class="line">NAME             READY     STATUS    RESTARTS   AGE</span><br><span class="line">po/mysql-vc9x6   1/1       Running   0          4h</span><br><span class="line">po/myweb-6k7s3   1/1       Running   0          2h</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">kubectl get ep</span></span><br><span class="line">NAME         ENDPOINTS            AGE</span><br><span class="line">kubernetes   192.168.1.171:6443   5d</span><br><span class="line">mysql        172.17.0.4:3306      4h</span><br><span class="line">myweb        172.17.0.2:8080      2h</span><br></pre></td></tr></table></figure>

<h2 id="定义文件"><a href="#定义文件" class="headerlink" title="定义文件"></a>定义文件</h2><p>mysql-rc.yaml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion :</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind :</span> <span class="string">ReplicationController</span></span><br><span class="line"><span class="attr">metadata :</span> </span><br><span class="line">    <span class="attr">name :</span> <span class="string">mysql</span></span><br><span class="line"><span class="attr">spec :</span> </span><br><span class="line">  <span class="attr">replicas :</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector :</span> </span><br><span class="line">    <span class="attr">app :</span> <span class="string">mysql</span></span><br><span class="line">  <span class="attr">template :</span> </span><br><span class="line">    <span class="attr">metadata :</span> </span><br><span class="line">      <span class="attr">labels :</span> </span><br><span class="line">        <span class="attr">app :</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">spec :</span> </span><br><span class="line">      <span class="attr">containers :</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name :</span> <span class="string">mysql</span></span><br><span class="line">        <span class="attr">image :</span> <span class="string">mysql</span></span><br><span class="line">        <span class="attr">ports :</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort :</span> <span class="number">3306</span></span><br><span class="line">        <span class="attr">env :</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name :</span> <span class="string">MYSQL_ROOT_PASSWORD</span></span><br><span class="line">          <span class="attr">value :</span> <span class="string">&quot;123456&quot;</span></span><br></pre></td></tr></table></figure>
<p>mysql-svc.yaml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion :</span> <span class="string">v1</span> </span><br><span class="line"><span class="attr">kind :</span> <span class="string">Service</span> </span><br><span class="line"><span class="attr">metadata :</span>  </span><br><span class="line">  <span class="attr">name :</span> <span class="string">mysql</span> </span><br><span class="line"><span class="attr">spec :</span>  </span><br><span class="line">  <span class="attr">ports :</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port :</span> <span class="number">3306</span></span><br><span class="line">  <span class="attr">selector :</span></span><br><span class="line">    <span class="attr">app :</span> <span class="string">mysql</span></span><br></pre></td></tr></table></figure>
<p>myweb-rc.yaml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion :</span> <span class="string">v1</span> </span><br><span class="line"><span class="attr">kind :</span> <span class="string">ReplicationController</span> </span><br><span class="line"><span class="attr">metadata :</span>  </span><br><span class="line">  <span class="attr">name :</span> <span class="string">myweb</span> </span><br><span class="line"><span class="attr">spec :</span>  </span><br><span class="line">  <span class="attr">replicas :</span> <span class="number">1</span> </span><br><span class="line">  <span class="attr">selector :</span>  </span><br><span class="line">    <span class="attr">app :</span> <span class="string">myweb</span> </span><br><span class="line">  <span class="attr">template :</span>  </span><br><span class="line">    <span class="attr">metadata :</span>  </span><br><span class="line">      <span class="attr">labels :</span>  </span><br><span class="line">        <span class="attr">app :</span> <span class="string">myweb</span> </span><br><span class="line">    <span class="attr">spec :</span>  </span><br><span class="line">      <span class="attr">containers :</span>  </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name :</span> <span class="string">myweb</span> </span><br><span class="line">          <span class="attr">image :</span> <span class="string">tomcat-app:v1</span> </span><br><span class="line">          <span class="attr">ports :</span>  </span><br><span class="line">            <span class="bullet">-</span> <span class="attr">containerPort :</span> <span class="number">8080</span> </span><br><span class="line">          <span class="attr">env :</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name :</span> <span class="string">MYSQL_SERVICE_HOST</span></span><br><span class="line">              <span class="attr">value :</span> <span class="string">&#x27;mysql&#x27;</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name :</span> <span class="string">MYSQL_SERVICE_PORT</span></span><br><span class="line">              <span class="attr">value :</span> <span class="string">&#x27;3306&#x27;</span></span><br></pre></td></tr></table></figure>
<p>myweb-svc.yaml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion :</span> <span class="string">v1</span> </span><br><span class="line"><span class="attr">kind :</span> <span class="string">Service</span> </span><br><span class="line"><span class="attr">metadata :</span>  </span><br><span class="line">  <span class="attr">name :</span> <span class="string">myweb</span> </span><br><span class="line"><span class="attr">spec :</span>  </span><br><span class="line">  <span class="attr">type :</span> <span class="string">NodePort</span></span><br><span class="line">  <span class="attr">ports :</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port :</span> <span class="number">8080</span></span><br><span class="line">    <span class="attr">nodePort :</span> <span class="number">30001</span></span><br><span class="line">  <span class="attr">selector :</span></span><br><span class="line">    <span class="attr">app :</span> <span class="string">myweb</span></span><br></pre></td></tr></table></figure>
<p>启动方式是顺序执行kubectl create -f yaml</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl create -f mysql-rc.yaml</span><br><span class="line">kubectl create -f mysql-svc.yaml</span><br><span class="line">kubectl create -f myweb-rc.yaml</span><br><span class="line">kubectl create -f myweb-svc.yaml</span><br></pre></td></tr></table></figure>
<p>启动后即前面提到的问题。</p>
<h2 id="查看源代码"><a href="#查看源代码" class="headerlink" title="查看源代码"></a>查看源代码</h2><p>既然无法建立连接，那先看下是如何建立连接的。登录到myweb的docker容器里面，查看index.jsp文件，主要内容如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">java.sql.Connection conn=<span class="literal">null</span>;</span><br><span class="line">java.lang.String strConn;</span><br><span class="line">java.sql.Statement stmt=<span class="literal">null</span>;</span><br><span class="line">java.sql.ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>).newInstance();</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">      Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">       String ip=System.getenv(<span class="string">&quot;MYSQL_SERVICE_HOST&quot;</span>);</span><br><span class="line">       String port=System.getenv(<span class="string">&quot;MYSQL_SERVICE_PORT&quot;</span>);</span><br><span class="line">       ip=(ip==<span class="literal">null</span>)?<span class="string">&quot;localhost&quot;</span>:ip;</span><br><span class="line">       port=(port==<span class="literal">null</span>)?<span class="string">&quot;3306&quot;</span>:port;</span><br><span class="line">      System.out.println(<span class="string">&quot;Connecting to database...&quot;</span>);</span><br><span class="line"></span><br><span class="line">      System.out.println(<span class="string">&quot;jdbc:mysql://&quot;</span>+ip+<span class="string">&quot;:&quot;</span>+port+<span class="string">&quot;?useUnicode=true&amp;characterEncoding=UTF-8&quot;</span>);</span><br><span class="line">      conn = java.sql.DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://&quot;</span>+ip+<span class="string">&quot;:&quot;</span>+port+<span class="string">&quot;?useUnicode=true&amp;characterEncoding=UTF-8&quot;</span>, <span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">      stmt = conn.createStatement();</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception ex)&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>就是用jsp创建了一个连接，连接的地址通过ENV方式注入。即在myweb-rc.yaml中配置的MYSQL_SERVICE_HOST和MYSQL_SERVICE_PORT环境变量指定。<br>既然指定名称为mysql无法解决，那换成mysql容器的IP是否可行呢？</p>
<h3 id="更新配置"><a href="#更新配置" class="headerlink" title="更新配置"></a>更新配置</h3><p>通过kubectl get ep 可以看到mysql暴露出的服务接口，那就用这个Ip试试。<br>修改myweb-rc.yaml:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env :</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name :</span> <span class="string">MYSQL_SERVICE_HOST</span></span><br><span class="line">      <span class="attr">value :</span> <span class="string">&#x27;172.17.0.4&#x27;</span></span><br></pre></td></tr></table></figure>
<p>然后重新部署pod。但是结果还是一样。</p>
<h3 id="网上看来的"><a href="#网上看来的" class="headerlink" title="网上看来的"></a>网上看来的</h3><p>网上有个说法说把　MYSQL_SERVICE_HOST　去掉不配置。但是从源码看，不配置的默认值是localhost，显然不能具备3306的端口服务。</p>
<h3 id="网络谜团"><a href="#网络谜团" class="headerlink" title="网络谜团"></a>网络谜团</h3><p>通过docker登录到容器内，互相ping网络都是通的。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql:/# ping 172.17.0.4</span><br><span class="line">PING 172.17.0.4 (172.17.0.4): 56 data bytes</span><br><span class="line">64 bytes from 172.17.0.4: icmp_seq=0 ttl=64 time=0.155 ms</span><br><span class="line">64 bytes from 172.17.0.4: icmp_seq=1 ttl=64 time=0.139 ms</span><br><span class="line">--- 172.17.0.4 ping statistics ---</span><br><span class="line">2 packets transmitted, 2 packets received, 0% packet loss</span><br><span class="line">round-trip min/avg/max/stddev = 0.139/0.147/0.155/0.000 ms</span><br><span class="line"></span><br><span class="line">myweb:/# ping 172.17.0.2</span><br><span class="line">PING 172.17.0.2 (172.17.0.2) 56(84) bytes of data.</span><br><span class="line">64 bytes from 172.17.0.2: icmp_seq=1 ttl=64 time=0.089 ms</span><br><span class="line">64 bytes from 172.17.0.2: icmp_seq=2 ttl=64 time=0.062 ms</span><br><span class="line">--- 172.17.0.2 ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.062/0.075/0.089/0.016 ms</span><br></pre></td></tr></table></figure>
<p>很显然网络是互通，但不知为何无法通过端口访问。</p>
<h3 id="clusterIP"><a href="#clusterIP" class="headerlink" title="clusterIP"></a>clusterIP</h3><p>除了ep暴露的端口服务外，还有一个ClusterIP存在，是否可以通过ClusterIP访问呢。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">kubectl get svc</span></span><br><span class="line">NAME             CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE</span><br><span class="line">svc/kubernetes   10.254.0.1      &lt;none&gt;        443/TCP          5d</span><br><span class="line">svc/mysql        10.254.67.31    &lt;none&gt;        3306/TCP         4h</span><br><span class="line">svc/myweb        10.254.62.177   &lt;nodes&gt;       8080:30001/TCP   2h</span><br></pre></td></tr></table></figure>
<p>发现ping　ClusterIP全部都不通。至此不明白了。</p>
<h2 id="三个IP"><a href="#三个IP" class="headerlink" title="三个IP"></a>三个IP</h2><p>Kubernetes中管理主要有三种类型的IP:Pod IP 、Cluster IP 和 外部IP。</p>
<h3 id="Pod-IP"><a href="#Pod-IP" class="headerlink" title="Pod IP"></a>Pod IP</h3><p>Kubernetes的最小部署单元是Pod。利用Flannel作为不同HOST之间容器互通技术时，由Flannel和etcd维护了一张节点间的路由表。Flannel的设计目的就是为集群中的所有节点重新规划IP地址的使用规则，从而使得不同节点上的容器能够获得“同属一个内网”且”不重复的”IP地址，并让属于不同节点上的容器能够直接通过内网IP通信。</p>
<p>每个Pod启动时，会自动创建一个镜像为gcr.io&#x2F;google_containers&#x2F;pause:0.8.0的容器，容器内部与外部的通信经由此容器代理，该容器的IP也可以称为Pod IP。</p>
<h3 id="Cluster-IP"><a href="#Cluster-IP" class="headerlink" title="Cluster IP"></a>Cluster IP</h3><p>Pod IP 地址是实际存在于某个网卡(可以是虚拟设备)上的，但Service Cluster IP就不一样了，没有网络设备为这个地址负责。它是由kube-proxy使用Iptables规则重新定向到其本地端口，再均衡到后端Pod的。</p>
<h3 id="外部IP"><a href="#外部IP" class="headerlink" title="外部IP"></a>外部IP</h3><p>Service对象在Cluster IP range池中分配到的IP只能在内部访问，如果服务作为一个应用程序内部的层次，还是很合适的。如果这个Service作为前端服务，准备为集群外的客户提供业务，我们就需要给这个服务提供公共IP了。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>依然不懂为什么会出现链接失败的情况，网络ping通的情况下，无法访问，<strong>这个坑填不上</strong>。<br>怀疑方向：应该是配置层面的问题，可能是k8s的，也可能是docker的。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jasonlee529.github.io/2018/06/05/f6a96606b982.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/1491256964.jpg">
      <meta itemprop="name" content="Jason Lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/06/05/f6a96606b982.html" class="post-title-link" itemprop="url">bower配置私服nexus3</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-06-05 19:30:30" itemprop="dateCreated datePublished" datetime="2018-06-05T19:30:30+08:00">2018-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/nexus/" itemprop="url" rel="index"><span itemprop="name">nexus</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="firestore-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>916</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>内容来自 <a href="https://help.sonatype.com/repomanager3/bower-repositories#BowerRepositories-BrowsingBowerRepositoriesandSearchingPackages">https://help.sonatype.com/repomanager3/bower-repositories#BowerRepositories-BrowsingBowerRepositoriesandSearchingPackages</a><br>nexus3.0版本不仅提供了maven的私服，还可以托管docker、npm、bower甚至是python的仓库，为搭建统一的私服平台提供了便利。</p>
</blockquote>
<h1 id="Bower-仓库"><a href="#Bower-仓库" class="headerlink" title="Bower 仓库"></a>Bower 仓库</h1><h5 id="1-简介"><a href="#1-简介" class="headerlink" title="* 1.简介"></a>* <a href="#1">1.简介</a></h5><h5 id="2-代理仓库"><a href="#2-代理仓库" class="headerlink" title="* 2.代理仓库"></a>* <a href="#2">2.代理仓库</a></h5><h5 id="3-本地私服仓库"><a href="#3-本地私服仓库" class="headerlink" title="* 3.本地私服仓库"></a>* <a href="#3">3.本地私服仓库</a></h5><h5 id="4-公开仓库组"><a href="#4-公开仓库组" class="headerlink" title="* 4.公开仓库组"></a>* <a href="#4">4.公开仓库组</a></h5><h5 id="5-安装bower"><a href="#5-安装bower" class="headerlink" title="* 5.安装bower"></a>* <a href="#5">5.安装bower</a></h5><h5 id="6-配置私服下载"><a href="#6-配置私服下载" class="headerlink" title="* 6.配置私服下载"></a>* <a href="#6">6.配置私服下载</a></h5><h5 id="7-浏览和检索依赖"><a href="#7-浏览和检索依赖" class="headerlink" title="* 7.浏览和检索依赖"></a>* <a href="#7">7.浏览和检索依赖</a></h5><h5 id="8-上传bower包"><a href="#8-上传bower包" class="headerlink" title="* 8.上传bower包"></a>* <a href="#8">8.上传bower包</a></h5><h2 id="1">简介</h2>
 Bower是一个前端包管理工具。

<p>NexusOSS是一个强大的Maven仓库管理器，它极大地简化了自己内部仓库的维护和外部仓库的访问。利用Nexus你可以只在一个地方就能够完全控制访问和部署在你所维护仓库中的每个Artifact。Nexus是一套“开箱即用”的系统不需要数据库，它使用文件系统加Lucene来组织数据。3.0版本之后加入了npm、bower、docker还有.net的仓库管理。</p>
<h2 id="2">代理仓库</h2>
NexusOss可以对bower的外部仓库进行代理，比如代理官方库：https://registry.bower.io 。在官方库速度较慢的情况下非常好用。

<p>创建bower代理库的步骤：</p>
<ul>
<li>选择创建repository,类型为bower(proxy)</li>
<li>定义仓库名称：bower-proxy</li>
<li>定义代理的仓库地址，例如官方仓库： <a href="https://registry.bower.io/">https://registry.bower.io</a></li>
<li>选择合适的存储</li>
</ul>
<h2 id="3">本地私服仓库</h2>
NexusOss支持创建本地私服用于管理bower包。私服仓库扮演了一个权威角色，定义包的URL和名称的关系。

<p>创建本地私服仓库的操作步骤:</p>
<ul>
<li>选择创建repository,类型为bower(hosted)</li>
<li>定义名称：bower-hosted</li>
<li>选择合适的存储</li>
</ul>
<h2 id="4">公开仓库组</h2>
推荐使用仓库组暴露Bower仓库地址。仓库组既可以暴露多个代理仓库和多个本地私服仓库，当代理仓库或者私服变动的时候不会影响到使用者。

<p>创建步骤如下:</p>
<ul>
<li>选择创建repository,类型为bower(group)</li>
<li>定义名称：bower-all</li>
<li>选择合适的存储</li>
<li>添加bower-proxy和bower-hosted仓库到组中<h2 id="5">安装bower</h2>
通过npm安装：
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g bower </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">bower -v</span></span><br><span class="line">1.7.7 </span><br></pre></td></tr></table></figure>
使用Bower私服需要添加一个解析自定义URL的组件来完成解析NexusOss的工作。可以通过下面两种方式引入：
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g bower-nexus3-resolver</span><br></pre></td></tr></table></figure>
或者引入到package.json中
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;devDependencies&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;bower-nexus3-resolver&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="6">配置私服下载</h2>
一旦配置了Bower私服，就需要配置.bowerrc文件来实现到私服的URL解析。一般需要配置.bowerrc文件，可以配置全局的.bowerrc，位于$HOME目录下，也可以配置在项目内部的.bowerrc文件中。
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;search&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;http://localhost:8081/repository/bower-all&quot;</span> <span class="punctuation">]</span></span><br><span class="line">   <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;resolvers&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;bower-nexus3-resolver&quot;</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
测试下效果：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">bower install jquery</span></span><br><span class="line">bower jquery#*</span><br><span class="line">  not-cached nexus+http://localhost:8081/repository/bower-all/jquery#*</span><br><span class="line">bower jquery#*</span><br><span class="line">  resolve nexus+http://localhost:8081/repository/bower-all/jquery#*</span><br><span class="line">bower jquery#*</span><br><span class="line">  resolved nexus+http://localhost:8081/repository/bower-all/jquery#2.2.0</span><br><span class="line">bower jquery#^2.2.0  install jquery#2.2.0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">jquery#</span><span class="language-bash">2.2.0 bower_components/jquery</span></span><br></pre></td></tr></table></figure>


<h2 id="7">浏览和检索依赖</h2>
NexusOSS提供了网页检索和浏览包，当然也可以通过Bower的命令行参数来检索。

<h2 id="8">上传bower包</h2>
发布Bower包，需要配置.bowerrc文件，制定register的位置；需要指定包的git路径。
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;registry&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;search&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;http://192.168.1.62:8081/nexus/repository/bower-all&quot;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;register&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;http://admin:admin123@192.168.1.62:8081/nexus/repository/bower-hosted&quot;</span></span><br><span class="line">   <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;resolvers&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;bower-nexus3-resolver&quot;</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
执行上传操作:
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bower register example-package git://gitserver/project.git</span><br></pre></td></tr></table></figure>
测试安装:
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bower install example-package</span><br></pre></td></tr></table></figure>

<h2 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h2><p>上次部分注意的是register的URL必须把授权参数填入，因为NexusOss侧需要权限验证，不写会一直报401的错误。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jasonlee529.github.io/2018/06/01/7efe2d1f43ac.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/1491256964.jpg">
      <meta itemprop="name" content="Jason Lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/06/01/7efe2d1f43ac.html" class="post-title-link" itemprop="url">k8s踩坑记第1篇--rc无法创建</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-06-01 17:12:09" itemprop="dateCreated datePublished" datetime="2018-06-01T17:12:09+08:00">2018-06-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="firestore-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>286</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>六一快乐!!!</p>
</blockquote>
<p>什么是k8s，我不想解释，百度资料有很多，本系列只踩坑，不科普。</p>
<h1 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h1><blockquote>
<p>做Hello　World的例子，结果get pods一直显示没有资源？</p>
</blockquote>
<p>应用配置代码：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion :</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind :</span> <span class="string">ReplicationController</span></span><br><span class="line"><span class="attr">metadata :</span> </span><br><span class="line">    <span class="attr">name :</span> <span class="string">mysql</span></span><br><span class="line"><span class="attr">spec :</span> </span><br><span class="line">  <span class="attr">replicas :</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">selector :</span> </span><br><span class="line">    <span class="attr">app :</span> <span class="string">mysql</span></span><br><span class="line">  <span class="attr">template :</span> </span><br><span class="line">    <span class="attr">metadata :</span> </span><br><span class="line">      <span class="attr">labels :</span> </span><br><span class="line">        <span class="attr">app :</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">spec :</span> </span><br><span class="line">      <span class="attr">containers :</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name :</span> <span class="string">mysql</span></span><br><span class="line">        <span class="attr">image :</span> <span class="string">mysql</span></span><br><span class="line">        <span class="attr">ports :</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort :</span> <span class="number">3306</span></span><br><span class="line">        <span class="attr">env :</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name :</span> <span class="string">MYSQL_ROOT_PASSWORD</span></span><br><span class="line">          <span class="attr">value :</span> <span class="string">&quot;123456&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>创建rc</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">kubectl create -f mysql-rc.yaml</span> </span><br><span class="line">replicationcontroller &quot;mysql&quot; created</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">kubectl get rc</span></span><br><span class="line">NAME      DESIRED   CURRENT   READY     AGE</span><br><span class="line">mysql     2         0         0         11s</span><br><span class="line">myweb     2         0         0         5s</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">kubectl get pods</span></span><br><span class="line">No resources found.</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker images</span></span><br><span class="line">REPOSITORY                                            TAG                 IMAGE ID            CREATED             SIZE</span><br></pre></td></tr></table></figure>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>创建了rc之后,虽然命令行提示成功了，但是pods一直没有创建，也检查了docker，mysql的镜像没有拉取。又仔细看了一边rc的结果，current和ready列的值是0，应该先解决current为０的问题。</p>
<h1 id="google解决方案"><a href="#google解决方案" class="headerlink" title="google解决方案"></a>google解决方案</h1><ol>
<li>executed command :<blockquote>
<p>openssl genrsa -out &#x2F;tmp&#x2F;serviceaccount.ket 2048</p>
</blockquote>
</li>
<li>modified the &#x2F;etc&#x2F;kubernetes&#x2F;apiserver file to add following :<blockquote>
<p>KUBE_API_ARGS&#x3D;”–service_account_key_file&#x3D;&#x2F;tmp&#x2F;serviceaccount.key”</p>
</blockquote>
</li>
<li>modified the &#x2F;etc&#x2F;kubernetes&#x2F;controller-manager and add following:　<blockquote>
<p>KUBE_CONTROLLER_MANAGER_ARGS&#x3D;”–service_account_private_key_file&#x3D;&#x2F;tmp&#x2F;serviceaccount.key”</p>
</blockquote>
</li>
<li>restarted the kube-apiserver and kube-controller-manager services to restart the services<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service kube-apiserver restart</span><br><span class="line">service kube-controller-manager restart</span><br></pre></td></tr></table></figure></li>
</ol>
<p>参考：<br><a href="https://blog.csdn.net/jinzhencs/article/details/51435020">https://blog.csdn.net/jinzhencs/article/details/51435020</a><br><a href="https://github.com/kubernetes/kubernetes/issues/11355#issuecomment-127378691">https://github.com/kubernetes/kubernetes/issues/11355#issuecomment-127378691</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jasonlee529.github.io/2018/05/25/50cae93ea6d3.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/1491256964.jpg">
      <meta itemprop="name" content="Jason Lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/05/25/50cae93ea6d3.html" class="post-title-link" itemprop="url">springmvc自定义的错误处理器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-05-25 16:22:49" itemprop="dateCreated datePublished" datetime="2018-05-25T16:22:49+08:00">2018-05-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring/SpringMVC/" itemprop="url" rel="index"><span itemprop="name">SpringMVC</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="firestore-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>0</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jasonlee529.github.io/2018/05/23/d8e407d837ca.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/1491256964.jpg">
      <meta itemprop="name" content="Jason Lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/05/23/d8e407d837ca.html" class="post-title-link" itemprop="url">git中闹不明白的autocrlf</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-05-23 15:10:52" itemprop="dateCreated datePublished" datetime="2018-05-23T15:10:52+08:00">2018-05-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="firestore-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>861</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>git管理代码仓库的时候，会经常遇到这样的情况：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">warning: CRLF will be replaced by LF in Test.java.</span><br><span class="line">The file will have its original line endings in your working directory.</span><br></pre></td></tr></table></figure>
<p>遇到上面的警告， 基本上都是将 autocrlf 设置为 false　解决，或者手动改变文件的CRLF属性。（IDEA具备这个功能，其他编辑器不知道）</p>
<h2 id="什么是CRLF"><a href="#什么是CRLF" class="headerlink" title="什么是CRLF?"></a>什么是CRLF?</h2><p>CRLF是Carriage-Return Line-Feed的缩写，意思是回车换行，就是回车(CR, ASCII 13, \r) 换行(LF, ASCII 10, \n)。</p>
<h2 id="有什么不同？"><a href="#有什么不同？" class="headerlink" title="有什么不同？"></a>有什么不同？</h2><ul>
<li>CRLF-&gt;Windows-style</li>
<li>LF-&gt;Unix Style</li>
<li>CR-&gt;Mac Style</li>
</ul>
<p>CRLF表示句尾使用回车换行两个字符(即我们常在Windows编程时使用”\r\n”换行)<br>LF表示表示句尾，只使用换行.<br>CR表示只使用回车.</p>
<h2 id="git的三种模式"><a href="#git的三种模式" class="headerlink" title="git的三种模式"></a>git的三种模式</h2><p>core.autocrlf有三种模式，分别对应三种转换情况。x代码换行符号，第一个是pull的转换情况，第二个是commit的时候情况。</p>
<ol>
<li>true:             x -&gt; LF -&gt; CRLF</li>
<li>input:            x -&gt; LF -&gt; LF</li>
<li>false:            x -&gt; x -&gt; x</li>
</ol>
<h3 id="换行符-LF-autocrlf-true"><a href="#换行符-LF-autocrlf-true" class="headerlink" title="换行符&#x3D;LF,autocrlf&#x3D;true"></a>换行符&#x3D;LF,autocrlf&#x3D;true</h3><p>如果你的源文件中是换行符是LF，而autocrlf&#x3D;true, 此时git add就会遇到 fatal: LF would be replaced by CRLF 的错误。有两个解决办法：</p>
<ol>
<li>将源文件中的LF转为CRLF即可【推荐】</li>
<li>将autocrlf 设置为 false</li>
</ol>
<h3 id="换行符-CRLF-autocrlf-input"><a href="#换行符-CRLF-autocrlf-input" class="headerlink" title="换行符&#x3D;CRLF,autocrlf&#x3D;input"></a>换行符&#x3D;CRLF,autocrlf&#x3D;input</h3><p>如果你的源文件中是换行符是CRLF，而autocrlf&#x3D;input,  此时git add也会遇到 fatal: CRLF would be replaced by LF 的错误。有两个解决办法：</p>
<ol>
<li>将你源文件中的CRLF转为LF【推荐】</li>
<li>将autocrlf 设置为true 或者 false</li>
</ol>
<h2 id="我的建议：在Unix-Linux上设置-autocrlf-input-在Windows上设置autocrlf-true（默认值）。"><a href="#我的建议：在Unix-Linux上设置-autocrlf-input-在Windows上设置autocrlf-true（默认值）。" class="headerlink" title="我的建议：在Unix&#x2F;Linux上设置 autocrlf &#x3D; input, 在Windows上设置autocrlf &#x3D; true（默认值）。"></a>我的建议：在Unix&#x2F;Linux上设置 autocrlf &#x3D; input, 在Windows上设置autocrlf &#x3D; true（默认值）。</h2><p>这样的话，<br>Windows：（true）<br>提交时，将CRLF 转成 LF再提交；<br>切出时，自动将LF 转为 CRLF;</p>
<p>Unix&#x2F;Linux: (input)<br>提交时,   将CRLF 转成 LF再提交；<br>切出时，保持LF即可</p>
<h2 id="这样即可保证仓库中永远都是LF-而且在Windows工作空间都是CRLF-Unix-Linux工作空间都是LF"><a href="#这样即可保证仓库中永远都是LF-而且在Windows工作空间都是CRLF-Unix-Linux工作空间都是LF" class="headerlink" title="这样即可保证仓库中永远都是LF. 而且在Windows工作空间都是CRLF, Unix&#x2F;Linux工作空间都是LF."></a>这样即可保证仓库中永远都是LF. 而且在Windows工作空间都是CRLF, Unix&#x2F;Linux工作空间都是LF.</h2><p>core.autocrlf<br>假如你正在Windows上写程序，又或者你正在和其他人合作，他们在Windows上编程，而你却在其他系统上，在这些情况下，你可能会遇到行尾结束符问题。这是因为Windows使用回车和换行两个字符来结束一行，而Mac和Linux只使用换行一个字符。虽然这是小问题，但它会极大地扰乱跨平台协作。</p>
<p>Git可以在你提交时自动地把行结束符CRLF转换成LF，而在签出代码时把LF转换成CRLF。用core.autocrlf来打开此项功能，如果是在Windows系统上，把它设置成true，这样当签出代码时，LF会被转换成CRLF：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global core.autocrlf <span class="literal">true</span></span>  </span><br></pre></td></tr></table></figure>

<p>Linux或Mac系统使用LF作为行结束符，因此你不想 Git 在签出文件时进行自动的转换；当一个以CRLF为行结束符的文件不小心被引入时你肯定想进行修正，把core.autocrlf设置成input来告诉 Git 在提交时把CRLF转换成LF，签出时不转换：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global core.autocrlf input</span>  </span><br></pre></td></tr></table></figure>
<p>这样会在Windows系统上的签出文件中保留CRLF，会在Mac和Linux系统上，包括仓库中保留LF。<br>如果你是Windows程序员，且正在开发仅运行在Windows上的项目，可以设置false取消此功能，把回车符记录在库中：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global core.autocrlf <span class="literal">false</span></span>  </span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jasonlee529.github.io/2018/05/10/7f9b7047eb1b.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/1491256964.jpg">
      <meta itemprop="name" content="Jason Lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/05/10/7f9b7047eb1b.html" class="post-title-link" itemprop="url">maven-配置私服提交权限</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-05-10 13:49:58" itemprop="dateCreated datePublished" datetime="2018-05-10T13:49:58+08:00">2018-05-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/nexus/" itemprop="url" rel="index"><span itemprop="name">nexus</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/maven/" itemprop="url" rel="index"><span itemprop="name">maven</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="firestore-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>201</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>自定义的jar包提交到nexus的私服中，直接通过maven命令提交。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean source:jar deploy -X -DskipTests=true</span><br></pre></td></tr></table></figure>
<p>参数解释：</p>
<ul>
<li>clean 清空上次编译结果</li>
<li>deploy 发布到情况</li>
<li>source:jar 同步发布源码</li>
<li>-X debug级别日志输出</li>
<li>-DskipTests&#x3D;true 跳过单元测试</li>
</ul>
<p>执行的过程中出现一个错误：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project io: Failed to deploy artifacts: Could not transfer artifact cn.infisa:io:jar:1.0.2-RELEASE from/to releases (http://192.168.1.62:8081/nexus/content/repositories/releases/): Failed to transfer file: http://192.168.1.62:8081/nexus/content/repositories/releases/cn/infisa/io/1.0.2-RELEASE/io-1.0.2-RELEASE.jar. Return code is: 401, ReasonPhrase: Unauthorized. -&gt; [Help 1]</span><br></pre></td></tr></table></figure>
<p>原因：　本地用户提交releases或者snapshots里面，需要配置对应的权限，而且需要在settings.xml中配置。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">username</span>&gt;</span>username<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">password</span>&gt;</span>password<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>再次提交，成功通过。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jasonlee529.github.io/2018/05/08/a7ce6ff35346.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/1491256964.jpg">
      <meta itemprop="name" content="Jason Lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/05/08/a7ce6ff35346.html" class="post-title-link" itemprop="url">Java如何调用shell脚本的</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-05-08 11:59:42" itemprop="dateCreated datePublished" datetime="2018-05-08T11:59:42+08:00">2018-05-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="firestore-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>484</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>有些时候会碰到这样的场景：java的功能里面要嵌入一个功能点，这个功能是通过是shell脚本实现的。这种时候就需要Java对脚本调用的支持了。</p>
<h2 id="测试环境"><a href="#测试环境" class="headerlink" title="测试环境"></a>测试环境</h2><p>Ubuntu16.04 i3-6100,12GB</p>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p>来看一个基本的例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="type">Process</span> <span class="variable">exec</span> <span class="operator">=</span> Runtime.getRuntime().exec(<span class="keyword">new</span> <span class="title class_">String</span>[] &#123; <span class="string">&quot;uname&quot;</span> ,<span class="string">&quot;-a&quot;</span>&#125;);</span><br><span class="line">    exec.waitFor();</span><br><span class="line">    <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(exec.getInputStream()));</span><br><span class="line">    System.out.println(reader.readLine());</span><br><span class="line"></span><br><span class="line">Linux jason-Inspiron-<span class="number">3650</span> <span class="number">4.4</span><span class="number">.0</span>-<span class="number">121</span>-generic #<span class="number">145</span>-Ubuntu SMP Fri Apr <span class="number">13</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">23</span> UTC <span class="number">2018</span> x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure>
<h2 id="解读Process"><a href="#解读Process" class="headerlink" title="解读Process"></a>解读Process</h2><p>java.lang.Process类提供了获取输入、输出、等待执行和销毁进程的方法。<br>Process类可通过ProcessBuilder.start() 和 Runtime.exec 创建实例，从Java1.5开始，ProcessBuilder.start()是更推荐的做法，但网上的教程更多推荐用Runtime.exec()方法。</p>
<p>| Modifier and Type      	| Method               	| Description                                                                                                              	|<br>|————————	|———————-	|————————————————————————————————————————–	|<br>| abstract void          	| destroy ()           	| Kills the subprocess.                                                                                                    	|<br>| abstract int           	| exitValue ()         	| Returns the exit value for the subprocess.                                                                               	|<br>| abstract  InputStream  	| getErrorStream ()    	| Returns the input stream connected to the error output of the subprocess.                                                	|<br>| abstract  InputStream  	|  getInputStream ()   	| Returns the input stream connected to the normal output of the subprocess.                                               	|<br>| abstract  OutputStream 	|  getOutputStream ()  	| Returns the output stream connected to the normal input of the subprocess.                                               	|<br>| abstract int           	| waitFor ()           	| Causes the current thread to wait, if necessary, until the process represented by this Process object has terminated.    	|</p>
<p>继承体系上面，Process的实现类是JDK内置的，linux版本的jdk中只带有一个实现类UnixProcess。</p>
<h2 id="与脚本交互"><a href="#与脚本交互" class="headerlink" title="与脚本交互"></a>与脚本交互</h2><p>Process不但可以执行进程，还可以获取进程的返回结果。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> String <span class="title function_">executeCommand</span><span class="params">(String command)</span> &#123;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">output</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        Process p;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            p = Runtime.getRuntime().exec(command);</span><br><span class="line">            <span class="type">int</span> <span class="variable">exitCode</span> <span class="operator">=</span> p.waitFor();</span><br><span class="line">            System.out.println(exitCode);</span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span></span><br><span class="line">                    <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(p.getInputStream()));</span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span> ((line = reader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                output.append(line + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(output.toString());</span><br><span class="line">        <span class="keyword">return</span> output.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">PING www.a.shifen.com (<span class="number">111.13</span><span class="number">.100</span><span class="number">.91</span>) <span class="number">56</span>(<span class="number">84</span>) bytes of data.</span><br><span class="line"><span class="number">64</span> bytes from <span class="title function_">localhost</span> <span class="params">(<span class="number">111.13</span><span class="number">.100</span><span class="number">.91</span>)</span>: icmp_seq=<span class="number">1</span> ttl=<span class="number">52</span> time=<span class="number">7.66</span> ms</span><br><span class="line"><span class="number">64</span> bytes from <span class="title function_">localhost</span> <span class="params">(<span class="number">111.13</span><span class="number">.100</span><span class="number">.91</span>)</span>: icmp_seq=<span class="number">2</span> ttl=<span class="number">52</span> time=<span class="number">7.90</span> ms</span><br><span class="line"><span class="number">64</span> bytes from <span class="title function_">localhost</span> <span class="params">(<span class="number">111.13</span><span class="number">.100</span><span class="number">.91</span>)</span>: icmp_seq=<span class="number">3</span> ttl=<span class="number">52</span> time=<span class="number">14.0</span> ms</span><br><span class="line"></span><br><span class="line">--- www.a.shifen.com ping statistics ---</span><br><span class="line"><span class="number">3</span> packets transmitted, <span class="number">3</span> received, <span class="number">0</span>% packet loss, time 2003ms</span><br><span class="line">rtt min/avg/max/mdev = <span class="number">7.668</span>/<span class="number">9.861</span>/<span class="number">14.013</span>/<span class="number">2.937</span> ms</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Java 执行脚本的方式其实类似用直接在bash里面执行脚本，区别在于环境有些变动，执行的效果和bash基本一致。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jasonlee529.github.io/2018/05/07/cc4c493c2c0b.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/1491256964.jpg">
      <meta itemprop="name" content="Jason Lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/05/07/cc4c493c2c0b.html" class="post-title-link" itemprop="url">Spring-boot项目整合监控actuator</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-05-07 11:53:18" itemprop="dateCreated datePublished" datetime="2018-05-07T11:53:18+08:00">2018-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring/Spring-boot/" itemprop="url" rel="index"><span itemprop="name">Spring-boot</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="firestore-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>573</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Spring-boot包含众多的starter，每一个starter都包含了一个方面的最佳实践，比如spring-boot-starter-web包含了构建web应用的依赖框架，spring-boot-starter-logging包含了日志输出所需框架的合集。而本文的主角spring-boot-starter-actuator包含了metrics的相关工具集。</p>
<h2 id="什么是actuator"><a href="#什么是actuator" class="headerlink" title="什么是actuator?"></a>什么是actuator?</h2><blockquote>
<p>Spring Boot Actuator includes a number of additional features to help you monitor and manage your application when it’s pushed to production. You can choose to manage and monitor your application using HTTP or JMX endpoints. Auditing, health and metrics gathering can be automatically applied to your application. The user guide covers the features in more detail.<br>Spring Boot Actuator包含了一些额外的特性用于生产环境中监控和管理spring　boot应用。actuator可以通过__HTTP__或者__JMX__对应用进行管控。可以自动收集审计、健康和度量信息。用户手册包含了更多的细节。</p>
</blockquote>
<p>土话就是，线上应用都需要管控工具，省得大家再去造一个轮子了，spring-boot造好了一个，开箱即用，都到碗里来吧。</p>
<h2 id="actuator的dependency分析"><a href="#actuator的dependency分析" class="headerlink" title="actuator的dependency分析"></a>actuator的dependency分析</h2><p>以1.5.4.RELEASE版本为例</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mvn dependency:tree</span></span><br><span class="line">[INFO] \- org.springframework.boot:spring-boot-starter-actuator:jar:1.5.4.RELEASE:compile</span><br><span class="line">[INFO]    +- org.springframework.boot:spring-boot-starter:jar:1.5.4.RELEASE:compile</span><br><span class="line">[INFO]    |  +- org.springframework.boot:spring-boot:jar:1.5.4.RELEASE:compile</span><br><span class="line">[INFO]    |  +- org.springframework.boot:spring-boot-autoconfigure:jar:1.5.4.RELEASE:compile</span><br><span class="line">[INFO]    |  +- org.springframework.boot:spring-boot-starter-logging:jar:1.5.4.RELEASE:compile</span><br><span class="line">[INFO]    |  |  +- ch.qos.logback:logback-classic:jar:1.1.11:compile</span><br><span class="line">[INFO]    |  |  |  +- ch.qos.logback:logback-core:jar:1.1.11:compile</span><br><span class="line">[INFO]    |  |  |  \- org.slf4j:slf4j-api:jar:1.7.22:compile</span><br><span class="line">[INFO]    |  |  +- org.slf4j:jcl-over-slf4j:jar:1.7.25:compile</span><br><span class="line">[INFO]    |  |  +- org.slf4j:jul-to-slf4j:jar:1.7.25:compile</span><br><span class="line">[INFO]    |  |  \- org.slf4j:log4j-over-slf4j:jar:1.7.25:compile</span><br><span class="line">[INFO]    |  +- org.springframework:spring-core:jar:4.3.9.RELEASE:compile</span><br><span class="line">[INFO]    |  \- org.yaml:snakeyaml:jar:1.17:runtime</span><br><span class="line">[INFO]    \- org.springframework.boot:spring-boot-actuator:jar:1.5.4.RELEASE:compile</span><br><span class="line">[INFO]       +- com.fasterxml.jackson.core:jackson-databind:jar:2.8.8:compile</span><br><span class="line">[INFO]       |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.8.0:compile</span><br><span class="line">[INFO]       |  \- com.fasterxml.jackson.core:jackson-core:jar:2.8.8:compile</span><br><span class="line">[INFO]       \- org.springframework:spring-context:jar:4.3.9.RELEASE:compile</span><br><span class="line">[INFO]          +- org.springframework:spring-aop:jar:4.3.9.RELEASE:compile</span><br><span class="line">[INFO]          +- org.springframework:spring-beans:jar:4.3.9.RELEASE:compile</span><br><span class="line">[INFO]          \- org.springframework:spring-expression:jar:4.3.9.RELEASE:compile</span><br></pre></td></tr></table></figure>
<p>核心依赖项目主要是spring-boot的相关基础组件和日志组件。</p>
<ul>
<li>sfl4j和logback相关的都是日志类的组件。</li>
<li>jackson相关是json处理组件。</li>
<li>spring-context和beans,core,aop,expression这些是任何spring项目几乎都需要的组件</li>
<li>spring-boot还有spring-boot-autoconfig以及yaml是spring－boot的基础组建，提供默认配置和yml配置的解析支持。</li>
<li>spring-boot-actuator提供了监控的特性</li>
</ul>
<h2 id="开箱即用"><a href="#开箱即用" class="headerlink" title="开箱即用"></a>开箱即用</h2><p>在pom.xml中添加：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后直接启动就可以了，启动后可以查看最简单的http接口</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl localhost:8080/health</span></span><br><span class="line">&#123;</span><br><span class="line">status: &quot;UP&quot;,</span><br><span class="line">diskSpace: &#123;</span><br><span class="line">status: &quot;UP&quot;,</span><br><span class="line">total: 196726059008,</span><br><span class="line">free: 163859410944,</span><br><span class="line">threshold: 10485760,</span><br><span class="line">&#125;,</span><br><span class="line">db: &#123;</span><br><span class="line">status: &quot;UP&quot;,</span><br><span class="line">database: &quot;MySQL&quot;,</span><br><span class="line">hello: 1,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://jasonlee529.github.io/2018/04/26/b2445218e71e.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/1491256964.jpg">
      <meta itemprop="name" content="Jason Lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Jason Lee Essay">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/04/26/b2445218e71e.html" class="post-title-link" itemprop="url">当git遇上中文乱码</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-04-26 16:07:11" itemprop="dateCreated datePublished" datetime="2018-04-26T16:07:11+08:00">2018-04-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="firestore-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>233</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>git有个比较奇怪的问题，当目录或者文件名中出现了中文的时候，在执行git status 的时候，会返回一串unicode码，这段unicode码就读不懂了，必须解决。</p>
<h2 id="git-status显示unicode-乱码"><a href="#git-status显示unicode-乱码" class="headerlink" title="git status显示unicode&#x2F;乱码"></a>git status显示unicode&#x2F;乱码</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git status</span></span><br><span class="line">untracked file :</span><br><span class="line">    &quot;\346\265\213\350\257\225/&quot;</span><br></pre></td></tr></table></figure>
<h3 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global core.quotepath <span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git status</span></span><br><span class="line">untracked file :</span><br><span class="line">    测试/文件.md</span><br></pre></td></tr></table></figure>
<h3 id="解惑："><a href="#解惑：" class="headerlink" title="解惑："></a>解惑：</h3><p>core.quotepath的作用是控制路径是否编码显示的选项。当路径中的字符大于0x80的时候，如果设置为true，转义显示；设置为false，不转义。</p>
<h2 id="git-commit-log-中乱码"><a href="#git-commit-log-中乱码" class="headerlink" title="git commit log 中乱码"></a>git commit log 中乱码</h2><p>windows平台上面的问题比linux上面要更多。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global gui.encoding utf-8</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global i18n.commitEncoding utf-8</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global gui.logOutputEncoding utf-8</span></span><br></pre></td></tr></table></figure>
<p>以上基本可全部解决。</p>
<h2 id="windows平台显示乱码"><a href="#windows平台显示乱码" class="headerlink" title="windows平台显示乱码"></a>windows平台显示乱码</h2><p>右键gitbash 选中“Options(选项)”-“text”.设置下面的locale为 zh_CN，Character Set 为UTF-8。<br>强烈推荐全部选用UTF-8,少用GBK。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Jason Lee</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">40k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:25</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/jasonlee529" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.24/fancybox/fancybox.umd.js" integrity="sha256-oyhjPiYRWGXaAt+ny/mTMWOnN1GBoZDUQnzzgC7FRI4=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.5.0/mermaid.min.js","integrity":"sha256-K7oJiQlDulzl24ZUFOywuYme1JqBBvQzK6m8qHjt9Gk="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/fancybox.js"></script>



  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/10.4.0/firebase-app-compat.js" integrity="sha256-kv9gfd+UUnUqqJ2d478LEHzOijuUbZOVdEkuXSMm4qM=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/10.4.0/firebase-firestore-compat.js" integrity="sha256-sS/hkEB7nn47hhc//PNKfXiRX2YMEe4rBqUIqEhMYA8=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="firestore" type="application/json">{"enable":true,"collection":"articles","apiKey":"AIzaSyCtIjc1ac9LEqDrmHibIZuxSJUEcC-dk3Y","projectId":"hexo-jason529"}</script>
  <script src="/js/third-party/statistics/firestore.js"></script>




</body>
</html>
